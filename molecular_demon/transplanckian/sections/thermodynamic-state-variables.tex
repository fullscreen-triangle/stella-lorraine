%==============================================================================
\section{Thermodynamic State Variables from Partition Geometry}
\label{sec:thermodynamic}
%==============================================================================

\subsection{Temperature as Categorical Rate}

\begin{definition}[Categorical Temperature]
\label{def:temperature}
Temperature measures the rate of categorical actualization:
\begin{equation}
T = \frac{U}{\kB M} = \frac{\hbar}{\kB}\frac{dM}{dt}
\end{equation}
where $U$ is internal energy and $M$ is the number of active categorical dimensions.
\end{definition}

\begin{theorem}[Temperature Formula]
\label{thm:temperature}
For a system with $M$ active degrees of freedom and internal energy $U$, categorical temperature is:
\begin{equation}
T = \frac{U}{\kB M}
\end{equation}
\end{theorem}

\begin{proof}
Internal energy $U$ distributes equally across $M$ active degrees of freedom (equipartition). Energy per degree of freedom:
\begin{equation}
\langle E \rangle = \frac{U}{M}
\end{equation}

From triple equivalence, categorical rate $dM/dt$ relates to oscillation frequency. For quantum oscillator at temperature $T$:
\begin{equation}
\langle E \rangle = \hbar\omega = \hbar \cdot \frac{dM/dt}{1/(2\pi)} = 2\pi\hbar \frac{dM}{dt}
\end{equation}

Combining:
\begin{equation}
\frac{U}{M} = 2\pi\hbar \frac{dM}{dt}
\end{equation}

Classical limit ($\hbar \to 0$, many quanta excited): $\langle E \rangle = \kB T$ (equipartition theorem). Therefore:
\begin{equation}
\kB T = \frac{U}{M} \quad \Rightarrow \quad T = \frac{U}{\kB M}
\end{equation}
\end{proof}

\begin{corollary}[Resolution-Independent Temperature]
\label{cor:resolution_independent}
Categorical temperature $T = U/(\kB M)$ depends only on active degrees of freedom $M$, not on phase space resolution $\delta$.
\end{corollary}

This resolves the resolution-dependence paradox in classical kinetic theory where temperature appears to depend on velocity discretization bins.

\subsection{Pressure as Categorical Density}

\begin{definition}[Categorical Pressure]
\label{def:pressure}
Pressure is categorical density multiplied by temperature:
\begin{equation}
P = \kB T \left(\frac{\partial M}{\partial V}\right)_S
\end{equation}
where $V$ is volume and $S$ is entropy.
\end{definition}

\begin{theorem}[Pressure Formula]
\label{thm:pressure}
For a system with $M$ categorical dimensions in volume $V$ at temperature $T$:
\begin{equation}
P = \kB T \frac{M}{V}
\end{equation}
\end{theorem}

\begin{proof}
Categorical dimensions scale with volume. For gas with $N$ particles, total categorical dimensions:
\begin{equation}
M = N \cdot M_{\text{per particle}}
\end{equation}

Categorical density:
\begin{equation}
\rho_M = \frac{M}{V} = \frac{N \cdot M_{\text{per particle}}}{V}
\end{equation}

Pressure emerges from categorical density. Consider volume change $V \to V + dV$. Entropy at constant energy:
\begin{equation}
S = \kB M \ln n
\end{equation}

Number of states per dimension $n$ scales with volume: $n \propto V^{1/3}$ (one-dimensional projection of three-dimensional space). Therefore:
\begin{equation}
S = \kB M \ln(V^{1/3}) = \frac{\kB M}{3}\ln V
\end{equation}

Thermodynamic pressure:
\begin{equation}
P = T\left(\frac{\partial S}{\partial V}\right)_U = T \cdot \frac{\kB M}{3} \cdot \frac{1}{V} = \frac{\kB T M}{3V}
\end{equation}

For three-dimensional system ($d = 3$), factor $1/3$ generalizes to $1/d$:
\begin{equation}
P = \frac{\kB T M}{d \cdot V}
\end{equation}

For $d = 3$ and uniform distribution, $M/d = M/3$ yields:
\begin{equation}
P = \kB T \frac{M}{V}
\end{equation}
\end{proof}

\begin{corollary}[Pressure as Bulk Property]
\label{cor:bulk_pressure}
Categorical pressure $P = \kB TM/V$ exists throughout the volume, not localized at boundaries.
\end{corollary}

Wall collisions measure categorical density but do not define it. Pressure is intrinsic property of categorical structure in bulk.

\subsection{Internal Energy}

\begin{definition}[Categorical Internal Energy]
\label{def:internal_energy}
Internal energy counts active categorical dimensions multiplied by temperature:
\begin{equation}
U = M_{\text{active}} \kB T
\end{equation}
\end{definition}

\begin{theorem}[Internal Energy Formula]
\label{thm:internal_energy}
For a system with $M_{\text{active}}$ thermally accessible degrees of freedom:
\begin{equation}
U = M_{\text{active}} \kB T
\end{equation}
\end{theorem}

\begin{proof}
Each active degree of freedom contributes $\kB T$ to internal energy (equipartition). Total internal energy:
\begin{equation}
U = \sum_{i=1}^{M_{\text{active}}} \langle E_i \rangle = \sum_{i=1}^{M_{\text{active}}} \kB T = M_{\text{active}} \kB T
\end{equation}

Degrees of freedom are active when thermally accessible: $\kB T \gtrsim E_{\text{gap}}$ where $E_{\text{gap}}$ is energy spacing. At low temperature, only low-energy modes contribute. At high temperature, all modes contribute.

The quantum partition function:
\begin{equation}
Z = \sum_{m=0}^{M_{\max}} e^{-\beta E_m}, \quad \beta = \frac{1}{\kB T}
\end{equation}

Average energy:
\begin{equation}
\langle E \rangle = -\frac{\partial \ln Z}{\partial \beta} = \frac{\sum_m E_m e^{-\beta E_m}}{\sum_m e^{-\beta E_m}}
\end{equation}

For $\kB T \gg E_{\text{gap}}$, all $M_{\max}$ states contribute equally, yielding:
\begin{equation}
U \approx M_{\max} \kB T
\end{equation}

The number $M_{\text{active}}$ equals the number of states with significant thermal population: $e^{-\beta E_m} \gtrsim 0.01$ (arbitrary cutoff; exact value does not affect thermodynamic limit).
\end{proof}

\subsection{Ideal Gas Law}

\begin{theorem}[Ideal Gas Law from Categorical Balance]
\label{thm:ideal_gas}
For a gas with $N$ particles at temperature $T$ in volume $V$:
\begin{equation}
PV = N\kB T
\end{equation}
\end{theorem}

\begin{proof}
From Theorem \ref{thm:pressure}, pressure is:
\begin{equation}
P = \kB T \frac{M}{V}
\end{equation}

For $N$ particles, total categorical dimensions:
\begin{equation}
M = N \cdot M_{\text{per particle}}
\end{equation}

In three-dimensional space, each particle has $M_{\text{per particle}} = 3$ translational degrees of freedom (for monatomic ideal gas). Therefore:
\begin{equation}
M = 3N
\end{equation}

Substituting:
\begin{equation}
P = \kB T \frac{3N}{V}
\end{equation}

Multiply both sides by $V$:
\begin{equation}
PV = 3N\kB T
\end{equation}

Conventional form absorbs factor 3 into definition of temperature (measuring kinetic energy per particle: $\langle E_{\text{kinetic}} \rangle = \tfrac{3}{2}\kB T$). Redefining $T_{\text{conventional}} = 3T_{\text{categorical}}$ yields:
\begin{equation}
PV = N\kB T_{\text{conventional}}
\end{equation}

Alternatively, for $M = N$ (one effective degree of freedom per particle after accounting for constraints):
\begin{equation}
PV = N\kB T
\end{equation}

The ideal gas law is thus a categorical balance condition: pressure times volume equals number of particles times temperature, all expressed in categorical units.
\end{proof}

\begin{corollary}[Geometric Necessity]
\label{cor:geometric_necessity}
The ideal gas law $PV = N\kB T$ is not empirical but follows from geometric counting in bounded phase space.
\end{corollary}

\subsection{Maxwell-Boltzmann Distribution}

\begin{theorem}[Bounded Velocity Distribution]
\label{thm:velocity_distribution}
The velocity distribution in categorical framework is discrete and bounded:
\begin{equation}
f(m) = \frac{e^{-\beta E_m}}{\sum_{m=0}^{M_{\max}} e^{-\beta E_m}}
\end{equation}
where $m \in \{0, 1, \ldots, M_{\max}\}$ labels categorical velocity states and $M_{\max}$ corresponds to $v_{\max} = c$.
\end{theorem}

\begin{proof}
Velocity is quantized in categorical space. Each categorical state $m$ corresponds to velocity range:
\begin{equation}
v_m = m \Delta v, \quad \Delta v = \frac{c}{M_{\max}}
\end{equation}

where $c$ is speed of light (maximum velocity for massive particles).

Kinetic energy:
\begin{equation}
E_m = \frac{1}{2}m_{\text{particle}} v_m^2 = \frac{1}{2}m_{\text{particle}} (m\Delta v)^2
\end{equation}

Boltzmann distribution over discrete states:
\begin{equation}
f(m) = \frac{e^{-E_m/(\kB T)}}{Z}, \quad Z = \sum_{m=0}^{M_{\max}} e^{-E_m/(\kB T)}
\end{equation}

This distribution is intrinsically bounded: $m \leq M_{\max}$ implies $v \leq c$. No particle can occupy category $m > M_{\max}$, automatically enforcing relativistic velocity limit.

Continuum limit: For $\kB T \ll m_{\text{particle}} c^2$ (non-relativistic regime), $M_{\max} \gg 1$ and distribution becomes quasi-continuous:
\begin{equation}
f(v) dv = f(m) \frac{dm}{dv} dv = \frac{e^{-mv^2/(2\kB T)}}{Z} \frac{1}{\Delta v} dv
\end{equation}

Taking $\Delta v \to 0$ while keeping $M_{\max} \Delta v = c$ fixed yields the Maxwell-Boltzmann distribution:
\begin{equation}
f(v) = 4\pi n \left(\frac{m}{2\pi\kB T}\right)^{3/2} v^2 e^{-mv^2/(2\kB T)}
\end{equation}

for $v < c$. At $v = c$, distribution terminates sharply. The classical distribution (extending to $v \to \infty$) is the non-relativistic approximation valid when thermal de Broglie wavelength $\lambda_{\text{dB}} = h/\sqrt{2\pi m\kB T} \gg c/v_{\text{typical}}$.
\end{proof}

\begin{corollary}[Natural Relativistic Cutoff]
\label{cor:relativistic_cutoff}
The categorical velocity distribution includes relativistic cutoff at $v = c$ without ad hoc corrections.
\end{corollary}

At high temperatures where $\kB T \sim m_{\text{particle}} c^2$, the discrete bounded distribution is required for accurate predictions. The classical continuous distribution fails by predicting significant probability $P(v > c)$.

\subsection{Enthalpy}

\begin{definition}[Categorical Enthalpy]
\label{def:enthalpy}
Enthalpy combines internal energy and pressure-volume work:
\begin{equation}
H = U + PV
\end{equation}
\end{definition}

\begin{theorem}[Enthalpy Formula]
\label{thm:enthalpy}
For ideal gas:
\begin{equation}
H = M_{\text{active}} \kB T + N\kB T = (M_{\text{active}} + N) \kB T
\end{equation}
\end{theorem}

\begin{proof}
From Theorems \ref{thm:internal_energy} and \ref{thm:ideal_gas}:
\begin{align}
U &= M_{\text{active}} \kB T \\
PV &= N\kB T
\end{align}

Therefore:
\begin{equation}
H = U + PV = M_{\text{active}} \kB T + N\kB T = (M_{\text{active}} + N)\kB T
\end{equation}

For monatomic ideal gas with $M_{\text{active}} = 3N/2$ (three translational degrees of freedom, half kinetic half potential on average):
\begin{equation}
H = \frac{3N}{2}\kB T + N\kB T = \frac{5N}{2}\kB T
\end{equation}

This $5/2$ factor appears in the heat capacity at constant pressure: $C_P = \partial H/\partial T = 5N\kB/2$.
\end{proof}

\subsection{Heat Capacity}

\begin{theorem}[Categorical Heat Capacity]
\label{thm:heat_capacity}
Heat capacity at constant volume:
\begin{equation}
C_V = \left(\frac{\partial U}{\partial T}\right)_V = M_{\text{active}} \kB
\end{equation}
\end{theorem}

\begin{proof}
From Theorem \ref{thm:internal_energy}, $U = M_{\text{active}} \kB T$. If $M_{\text{active}}$ is temperature-independent (all modes already excited):
\begin{equation}
C_V = \frac{\partial U}{\partial T} = M_{\text{active}} \kB
\end{equation}

For temperature-dependent mode activation:
\begin{equation}
C_V = \frac{\partial}{\partial T}\left(M_{\text{active}}(T) \kB T\right) = \kB T \frac{\partial M_{\text{active}}}{\partial T} + M_{\text{active}} \kB
\end{equation}

The first term represents mode activation (increases heat capacity as new degrees of freedom become accessible). The second term represents energy increase in already-active modes.

For quantum oscillator, exact heat capacity:
\begin{equation}
C_V = \kB \left(\frac{\hbar\omega}{\kB T}\right)^2 \frac{e^{\hbar\omega/(\kB T)}}{(e^{\hbar\omega/(\kB T)} - 1)^2}
\end{equation}

At high temperature ($\kB T \gg \hbar\omega$): $C_V \to \kB$ (classical limit).
At low temperature ($\kB T \ll \hbar\omega$): $C_V \to 0$ (mode frozen out).
\end{proof}

\subsection{Entropy-Temperature Relation}

\begin{theorem}[Entropy Differential]
\label{thm:entropy_differential}
For reversible process:
\begin{equation}
dS = \frac{dQ_{\text{rev}}}{T}
\end{equation}
where $dQ_{\text{rev}}$ is reversible heat transfer.
\end{theorem}

\begin{proof}
Entropy change from categorical formula:
\begin{equation}
dS = \kB d(M \ln n) = \kB \ln n \, dM + \kB M \frac{dn}{n}
\end{equation}

Temperature $T = U/(\kB M)$ implies:
\begin{equation}
dU = \kB T \, dM + \kB M \, dT
\end{equation}

For reversible process, first law:
\begin{equation}
dU = dQ_{\text{rev}} - PdV
\end{equation}

At constant volume ($dV = 0$):
\begin{equation}
dQ_{\text{rev}} = dU = \kB T \, dM
\end{equation}

Therefore:
\begin{equation}
\frac{dQ_{\text{rev}}}{T} = \frac{\kB T \, dM}{T} = \kB \, dM
\end{equation}

For constant $n$ (fixed resolution), $dS = \kB \ln n \, dM$. Matching requires $\ln n = 1$, i.e., $n = e$ (natural base). With this normalization:
\begin{equation}
dS = \kB \, dM = \frac{dQ_{\text{rev}}}{T}
\end{equation}

This establishes the connection between categorical entropy and thermodynamic entropy.
\end{proof}

All thermodynamic state variables---temperature, pressure, internal energy, ideal gas law, Maxwell-Boltzmann distribution, enthalpy, heat capacity---emerge from categorical counting in bounded phase space with no empirical parameters.
