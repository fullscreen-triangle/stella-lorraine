<svg width="900" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; }
      .subtitle { font: bold 18px sans-serif; }
      .label { font: 14px sans-serif; }
      .small { font: 12px sans-serif; }
      .tiny { font: 10px sans-serif; }
    </style>

    <marker id="arrow-down" markerWidth="10" markerHeight="10" refX="3" refY="9" orient="auto">
      <polygon points="0 0, 6 0, 3 10" fill="#ef4444" />
    </marker>

    <marker id="arrow-maintain" markerWidth="10" markerHeight="10" refX="3" refY="9" orient="auto">
      <polygon points="0 0, 6 0, 3 10" fill="#10b981" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" class="title">
    Categorical Exclusion: Precision Management Through State Selection
  </text>

  <!-- LEFT PANEL: No Exclusion -->
  <g id="no-exclusion">
    <text x="200" y="80" text-anchor="middle" class="subtitle" fill="#ef4444">
      A. No Exclusion
    </text>

    <!-- Timeline axis -->
    <line x1="200" y1="120" x2="200" y2="600" stroke="#333" stroke-width="2.5"/>
    <polygon points="200,120 197,128 203,128" fill="#333"/>
    <text x="210" y="115" class="label">Time</text>

    <!-- Harmonic levels (decreasing precision) -->
    <!-- n=150 -->
    <line x1="150" y1="180" x2="250" y2="180" stroke="#2563eb" stroke-width="3"/>
    <text x="140" y="185" text-anchor="end" class="tiny">n=150</text>
    <text x="260" y="185" class="tiny" fill="#2563eb" font-weight="bold">94 as</text>

    <!-- n=140 -->
    <line x1="150" y1="210" x2="250" y2="210" stroke="#2563eb" stroke-width="2.5"/>
    <text x="140" y="215" text-anchor="end" class="tiny">n=140</text>
    <text x="260" y="215" class="tiny">100 as</text>

    <!-- n=130 -->
    <line x1="150" y1="240" x2="250" y2="240" stroke="#3b82f6" stroke-width="2.5"/>
    <text x="140" y="245" text-anchor="end" class="tiny">n=130</text>
    <text x="260" y="245" class="tiny">108 as</text>

    <!-- n=120 -->
    <line x1="150" y1="270" x2="250" y2="270" stroke="#3b82f6" stroke-width="2.5"/>
    <text x="140" y="275" text-anchor="end" class="tiny">n=120</text>
    <text x="260" y="275" class="tiny">117 as</text>

    <!-- n=100 -->
    <line x1="150" y1="310" x2="250" y2="310" stroke="#60a5fa" stroke-width="2.5"/>
    <text x="140" y="315" text-anchor="end" class="tiny">n=100</text>
    <text x="260" y="315" class="tiny">141 as</text>

    <!-- n=80 -->
    <line x1="150" y1="360" x2="250" y2="360" stroke="#93c5fd" stroke-width="2"/>
    <text x="140" y="365" text-anchor="end" class="tiny">n=80</text>
    <text x="260" y="365" class="tiny">176 as</text>

    <!-- n=60 -->
    <line x1="150" y1="410" x2="250" y2="410" stroke="#f59e0b" stroke-width="2"/>
    <text x="140" y="415" text-anchor="end" class="tiny">n=60</text>
    <text x="260" y="415" class="tiny">235 as</text>

    <!-- n=40 -->
    <line x1="150" y1="470" x2="250" y2="470" stroke="#fb923c" stroke-width="2"/>
    <text x="140" y="475" text-anchor="end" class="tiny">n=40</text>
    <text x="260" y="475" class="tiny">353 as</text>

    <!-- n=20 -->
    <line x1="150" y1="540" x2="250" y2="540" stroke="#ef4444" stroke-width="2"/>
    <text x="140" y="545" text-anchor="end" class="tiny">n=20</text>
    <text x="260" y="545" class="tiny">705 as</text>

    <!-- Degradation arrow -->
    <line x1="280" y1="180" x2="280" y2="540" stroke="#ef4444" stroke-width="4" marker-end="url(#arrow-down)"/>
    <text x="295" y="360" class="label" fill="#ef4444" font-weight="bold">Precision</text>
    <text x="295" y="380" class="label" fill="#ef4444" font-weight="bold">Degrades</text>

    <!-- Average precision box -->
    <rect x="120" y="620" width="160" height="40" fill="#fee2e2" stroke="#ef4444" stroke-width="2" rx="5"/>
    <text x="200" y="645" text-anchor="middle" class="label" font-weight="bold" fill="#ef4444">
      Average: 400 as
    </text>
  </g>

  <!-- RIGHT PANEL: Strategic Exclusion -->
  <g id="strategic-exclusion">
    <text x="650" y="80" text-anchor="middle" class="subtitle" fill="#10b981">
      B. Strategic Exclusion
    </text>

    <!-- Timeline axis -->
    <line x1="650" y1="120" x2="650" y2="600" stroke="#333" stroke-width="2.5"/>
    <polygon points="650,120 647,128 653,128" fill="#333"/>
    <text x="660" y="115" class="label">Time</text>

    <!-- Excluded region (shaded) -->
    <rect x="590" y="360" width="120" height="240" fill="#fee2e2" opacity="0.4"/>
    <text x="650" y="470" text-anchor="middle" class="label" fill="#ef4444" font-weight="bold">
      Excluded
    </text>
    <text x="650" y="490" text-anchor="middle" class="small" fill="#ef4444">
      n &lt; 100
    </text>
    <text x="650" y="510" text-anchor="middle" class="tiny" fill="#ef4444">
      (Low precision)
    </text>

    <!-- Available harmonics (high precision maintained) -->
    <!-- n=150 -->
    <line x1="600" y1="180" x2="700" y2="180" stroke="#10b981" stroke-width="3"/>
    <text x="590" y="185" text-anchor="end" class="tiny">n=150</text>
    <text x="710" y="185" class="tiny" fill="#10b981" font-weight="bold">94 as</text>

    <!-- n=145 -->
    <line x1="600" y1="200" x2="700" y2="200" stroke="#10b981" stroke-width="2.8"/>
    <text x="590" y="205" text-anchor="end" class="tiny">n=145</text>
    <text x="710" y="205" class="tiny">97 as</text>

    <!-- n=140 -->
    <line x1="600" y1="220" x2="700" y2="220" stroke="#10b981" stroke-width="2.6"/>
    <text x="590" y="225" text-anchor="end" class="tiny">n=140</text>
    <text x="710" y="225" class="tiny">100 as</text>

    <!-- n=135 -->
    <line x1="600" y1="240" x2="700" y2="240" stroke="#10b981" stroke-width="2.4"/>
    <text x="590" y="245" text-anchor="end" class="tiny">n=135</text>
    <text x="710" y="245" class="tiny">104 as</text>

    <!-- n=130 -->
    <line x1="600" y1="260" x2="700" y2="260" stroke="#10b981" stroke-width="2.3"/>
    <text x="590" y="265" text-anchor="end" class="tiny">n=130</text>
    <text x="710" y="265" class="tiny">108 as</text>

    <!-- n=125 -->
    <line x1="600" y1="280" x2="700" y2="280" stroke="#10b981" stroke-width="2.2"/>
    <text x="590" y="285" text-anchor="end" class="tiny">n=125</text>
    <text x="710" y="285" class="tiny">113 as</text>

    <!-- n=120 -->
    <line x1="600" y1="300" x2="700" y2="300" stroke="#10b981" stroke-width="2.1"/>
    <text x="590" y="305" text-anchor="end" class="tiny">n=120</text>
    <text x="710" y="305" class="tiny">117 as</text>

    <!-- n=115 -->
    <line x1="600" y1="320" x2="700" y2="320" stroke="#10b981" stroke-width="2"/>
    <text x="590" y="325" text-anchor="end" class="tiny">n=115</text>
    <text x="710" y="325" class="tiny">122 as</text>

    <!-- n=110 -->
    <line x1="600" y1="340" x2="700" y2="340" stroke="#10b981" stroke-width="2"/>
    <text x="590" y="345" text-anchor="end" class="tiny">n=110</text>
    <text x="710" y="345" class="tiny">128 as</text>

    <!-- n=105 -->
    <line x1="600" y1="360" x2="700" y2="360" stroke="#10b981" stroke-width="2"/>
    <text x="590" y="365" text-anchor="end" class="tiny">n=105</text>
    <text x="710" y="365" class="tiny">134 as</text>

    <!-- n=100 -->
    <line x1="600" y1="380" x2="700" y2="380" stroke="#10b981" stroke-width="2"/>
    <text x="590" y="385" text-anchor="end" class="tiny">n=100</text>
    <text x="710" y="385" class="tiny">141 as</text>

    <!-- Maintained precision arrow -->
    <line x1="730" y1="180" x2="730" y2="380" stroke="#10b981" stroke-width="4" marker-end="url(#arrow-maintain)"/>
    <text x="745" y="270" class="label" fill="#10b981" font-weight="bold">Precision</text>
    <text x="745" y="290" class="label" fill="#10b981" font-weight="bold">Maintained</text>

    <!-- Average precision box -->
    <rect x="570" y="620" width="160" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="5"/>
    <text x="650" y="645" text-anchor="middle" class="label" font-weight="bold" fill="#10b981">
      Average: 110 as
    </text>
  </g>

  <!-- Improvement factor -->
  <line x1="150" y1="700" x2="750" y2="700" stroke="#7c3aed" stroke-width="5"/>
  <line x1="150" y1="695" x2="150" y2="705" stroke="#7c3aed" stroke-width="5"/>
  <line x1="750" y1="695" x2="750" y2="705" stroke="#7c3aed" stroke-width="5"/>
  <text x="450" y="690" text-anchor="middle" class="title" fill="#7c3aed" font-size="28">
    3.6× Improvement
  </text>

  <!-- Mechanism explanation -->
  <rect x="100" y="730" width="700" height="55" fill="#fef9e7" stroke="#f59e0b" stroke-width="2" rx="8"/>
  <text x="450" y="755" text-anchor="middle" class="small">
    <tspan font-weight="bold">Categorical Exclusion Mechanism:</tspan> Pre-exclude low-precision harmonics (n &lt; 100, Δt &gt; 140 as),
  </text>
  <text x="450" y="773" text-anchor="middle" class="small">
    preserve high-precision harmonics (n ≥ 100, Δt &lt; 140 as) → 400 as / 110 as = <tspan font-weight="bold" fill="#10b981">3.6× better precision</tspan>
  </text>
</svg>
